
\newlength{\colorsegmentlength}% Used internally
\newlength{\colortotallength}% Used internally
\newcounter{colorcounter}% Used internally

\newcommand{\coloredrulei}[3]{% {segment length}{rule height}{colors}
  \renewcommand*{\do}[1]{%
    \textcolor{##1}{\rule{#1}{#2}}}
  \begingroup\docsvlist{#3}\endgroup}

\newcommand{\coloredrule}[3]{% {total length}{rule height}{colors}
  \setlength{\colortotallength}{#1}
  \renewcommand*{\do}[1]{%
      \stepcounter{colorcounter}}
    \setcounter{colorcounter}{0}
    \docsvlist{#3}
  \setlength{\colorsegmentlength}{%
    \dimexpr \numexpr \colortotallength / \value{colorcounter} \relax sp \relax}
  \coloredrulei{\colorsegmentlength}{#2}{#3}}


\begin{document}

\tikzstyle{box} = [rectangle, rounded corners, minimum width=4cm, minimum height=3cm,text centered, draw=black, fill=gray!10]

\begin{tikzpicture}
  \node [box] (population) {};
  \node [anchor=north] at (population.north) {Population};

  \node (line1) [anchor=south west] at (population.south west) {$\coloredrule{5mm}{1mm}{green}$};
  \node (line2) [anchor=south west] at (line1.north west) {$\coloredrule{10mm}{1mm}{blue}$};
  \node (line3) [anchor=south west] at (line2.north west) {$\coloredrule{8mm}{1mm}{red}$};
  \node (line4) [anchor=south west] at (line3.north west) {$\coloredrule{20mm}{1mm}{black}$};
  \node (line5) [anchor=south west] at (line4.north west) {$\coloredrule{16mm}{1mm}{yellow}$};
\end{tikzpicture}